# Open-Meteo Driver

ü§ñ **AUTO-GENERATED by Driver Creator Agent**
üìÖ **Generated:** now

## Overview

None driver for Open-Meteo following [Driver Design v2.0](../docs/driver_design_v2.md) specification.

**Base URL:** `https://open-meteo.com/en/docs`

## Installation

```bash
pip install open_meteo_driver
```

## Quick Start

```python
from open_meteo_driver import OpenMeteoDriver

# Option 1: Load from environment
client = OpenMeteoDriver.from_env()

# Option 2: Explicit credentials
client = OpenMeteoDriver(
    api_url="https://open-meteo.com/en/docs",
    api_key="your_api_key_here"
)

# Discovery
objects = client.list_objects()
print(f"Available objects: {', '.join(objects)}")

fields = client.get_fields("YourObject")
print(f"Fields: {list(fields.keys())}")


# Read data
results = client.read(limit=10)

print(f"Found {len(results)} records")

# Cleanup
client.close()
```

## Authentication

### Getting Credentials

1. Sign up for Open-Meteo account
2. Navigate to API settings
3. Generate API key
4. Copy your API key and base URL

### Environment Variables

Create a `.env` file in your project root:

```bash
OPEN_METEO_DRIVER_API_URL=https://open-meteo.com/en/docs
OPEN_METEO_DRIVER_API_KEY=your_api_key_here
```

Then use `from_env()` method:

```python
client = OpenMeteoDriver.from_env()
```



## Capabilities

```python
capabilities = client.get_capabilities()

# Check what the driver supports:
print(f"Read operations: {capabilities.read}")
print(f"Write operations: {capabilities.write}")
print(f"Query language: {capabilities.query_language}")
print(f"Pagination style: {capabilities.pagination.value}")
```

**This driver supports:**

- ‚úÖ Read operations
- ‚ùå Write operations (read-only)
- ‚ùå Delete operations (not supported)
- ‚ùå Batch operations (not yet implemented)
- ‚ùå Pagination (not needed)

## Common Patterns

### Error Handling

```python
from open_meteo_driver.exceptions import (
    ObjectNotFoundError,
    RateLimitError,
    QuerySyntaxError
)

try:
    results = client.read("SELECT * FROM NonExistentObject")

except ObjectNotFoundError as e:
    print(f"Error: {e.message}")
    print(f"Available objects: {e.details['available']}")

except RateLimitError as e:
    print(f"Rate limited. Retry after {e.details['retry_after']} seconds")
```

### Discovery Pattern

Always discover schema before querying:

```python
# Step 1: Discover available objects
objects = client.list_objects()
print(f"Available: {', '.join(objects)}")

# Step 2: Get field schema
fields = client.get_fields("YourObject")
available_fields = list(fields.keys())

# Step 3: Build query dynamically

results = client.read(limit=10)

```



### Debug Mode

Enable debug logging to see all API calls:

```python
client = OpenMeteoDriver(
    api_url="https://open-meteo.com/en/docs",
    api_key="your_key",
    debug=True
)

# Now all API calls are logged:
# [DEBUG] GET https://open-meteo.com/en/docs/objects
# [DEBUG] Rate limited. Retrying in 2s...
```

## Rate Limits


**Rate limits:** Check Open-Meteo API documentation.

The driver implements automatic retry with exponential backoff.


Check remaining rate limit:

```python
status = client.get_rate_limit_status()
if status["remaining"]:
    print(f"API calls remaining: {status['remaining']}/{status['limit']}")
```

## API Reference

### Core Methods

#### `list_objects() -> List[str]`

Discover all available objects/tables.

```python
objects = client.list_objects()
# Returns: ["Object1", "Object2", ...]
```

#### `get_fields(object_name: str) -> Dict[str, Any]`

Get field schema for an object.

```python
fields = client.get_fields("YourObject")
# Returns: {
#     "field_name": {
#         "type": "string",
#         "label": "Field Name",
#         "required": False,
#         "nullable": True
#     },
#     ...
# }
```


#### `read(limit: Optional[int] = None, offset: Optional[int] = None) -> List[Dict[str, Any]]`

Read data from default endpoint.

```python
results = client.read(limit=10)
# Returns: [{"field1": "value1", ...}, ...]
```


#### `get_capabilities() -> DriverCapabilities`

Get driver capabilities.

```python
caps = client.get_capabilities()
print(f"Query language: {caps.query_language}")
print(f"Pagination: {caps.pagination.value}")
```

#### `close()`

Close connections and cleanup.

```python
client.close()
```

## Examples

See the `examples/` directory for complete working examples:

- `list_objects.py` - Discover available objects
- `query_data.py` - Query and display data

## Troubleshooting

### Authentication Errors

**Error:** `AuthenticationError: Invalid credentials`

**Solution:**
- Check your API key is correct
- Verify `.env` file exists and has `OPEN_METEO_DRIVER_API_KEY`
- Ensure API key has necessary permissions

### Connection Errors

**Error:** `ConnectionError: Cannot connect to Open-Meteo`

**Solution:**
- Check `OPEN_METEO_DRIVER_API_URL` is correct
- Verify API is reachable (not down for maintenance)
- Check your network/firewall settings

### Rate Limit Errors

**Error:** `RateLimitError: API rate limit exceeded`

**Solution:**
- Wait for the time specified in `retry_after`
- Reduce query frequency
- Increase `max_retries` parameter
- Add delays between requests

### Query Syntax Errors


Check API documentation for valid endpoints and parameters.


## Development

### Running Tests

```bash
pytest tests/
```

### Type Checking

```bash
mypy open_meteo_driver/
```

## License

MIT

## Contributing

Contributions welcome! Please:
1. Follow Driver Design v2.0 spec
2. Add tests for new features
3. Update documentation
4. Run type checker and formatter

## Support

- üìö [Driver Design v2.0](../docs/driver_design_v2.md)
- üêõ [Report Issues](https://github.com/your-org/open_meteo_driver/issues)

- üìñ [Open-Meteo API Docs](https://open-meteo.com/en/docs)


---

**ü§ñ Generated by Driver Creator Agent**
Following [Driver Design v2.0](../docs/driver_design_v2.md) specification